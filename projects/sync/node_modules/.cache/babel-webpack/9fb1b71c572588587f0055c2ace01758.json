{"ast":null,"code":"import { fromEvent, Observable } from 'rxjs';\nexport var ERR_CORDOVA_NOT_AVAILABLE = {\n  error: 'cordova_not_available'\n};\nexport var ERR_PLUGIN_NOT_INSTALLED = {\n  error: 'plugin_not_installed'\n};\nexport function getPromise(callback) {\n  var tryNativePromise = function tryNativePromise() {\n    if (Promise) {\n      return new Promise(function (resolve, reject) {\n        callback(resolve, reject);\n      });\n    } else {\n      console.error('No Promise support or polyfill found. To enable Ionic Native support, please add the es6-promise polyfill before this script, or run with a library like Angular or on a recent browser.');\n    }\n  };\n\n  if (typeof window !== 'undefined' && window.angular) {\n    var doc = window.document;\n    var injector = window.angular.element(doc.querySelector('[ng-app]') || doc.body).injector();\n\n    if (injector) {\n      var $q = injector.get('$q');\n      return $q(function (resolve, reject) {\n        callback(resolve, reject);\n      });\n    }\n\n    console.warn(\"Angular 1 was detected but $q couldn't be retrieved. This is usually when the app is not bootstrapped on the html or body tag. Falling back to native promises which won't trigger an automatic digest when promises resolve.\");\n  }\n\n  return tryNativePromise();\n}\nexport function wrapPromise(pluginObj, methodName, args, opts) {\n  if (opts === void 0) {\n    opts = {};\n  }\n\n  var pluginResult, rej;\n  var p = getPromise(function (resolve, reject) {\n    if (opts.destruct) {\n      pluginResult = callCordovaPlugin(pluginObj, methodName, args, opts, function () {\n        var args = [];\n\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n\n        return resolve(args);\n      }, function () {\n        var args = [];\n\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n\n        return reject(args);\n      });\n    } else {\n      pluginResult = callCordovaPlugin(pluginObj, methodName, args, opts, resolve, reject);\n    }\n\n    rej = reject;\n  }); // Angular throws an error on unhandled rejection, but in this case we have already printed\n  // a warning that Cordova is undefined or the plugin is uninstalled, so there is no reason\n  // to error\n\n  if (pluginResult && pluginResult.error) {\n    p.catch(function () {});\n    typeof rej === 'function' && rej(pluginResult.error);\n  }\n\n  return p;\n}\n\nfunction wrapOtherPromise(pluginObj, methodName, args, opts) {\n  if (opts === void 0) {\n    opts = {};\n  }\n\n  return getPromise(function (resolve, reject) {\n    var pluginResult = callCordovaPlugin(pluginObj, methodName, args, opts);\n\n    if (pluginResult) {\n      if (pluginResult.error) {\n        reject(pluginResult.error);\n      } else if (pluginResult.then) {\n        pluginResult.then(resolve).catch(reject);\n      }\n    } else {\n      reject({\n        error: 'unexpected_error'\n      });\n    }\n  });\n}\n\nfunction wrapObservable(pluginObj, methodName, args, opts) {\n  if (opts === void 0) {\n    opts = {};\n  }\n\n  return new Observable(function (observer) {\n    var pluginResult;\n\n    if (opts.destruct) {\n      pluginResult = callCordovaPlugin(pluginObj, methodName, args, opts, function () {\n        var args = [];\n\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n\n        return observer.next(args);\n      }, function () {\n        var args = [];\n\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n\n        return observer.error(args);\n      });\n    } else {\n      pluginResult = callCordovaPlugin(pluginObj, methodName, args, opts, observer.next.bind(observer), observer.error.bind(observer));\n    }\n\n    if (pluginResult && pluginResult.error) {\n      observer.error(pluginResult.error);\n      observer.complete();\n    }\n\n    return function () {\n      try {\n        if (opts.clearFunction) {\n          if (opts.clearWithArgs) {\n            return callCordovaPlugin(pluginObj, opts.clearFunction, args, opts, observer.next.bind(observer), observer.error.bind(observer));\n          }\n\n          return callCordovaPlugin(pluginObj, opts.clearFunction, []);\n        }\n      } catch (e) {\n        console.warn('Unable to clear the previous observable watch for', pluginObj.constructor.getPluginName(), methodName);\n        console.warn(e);\n      }\n    };\n  });\n}\n/**\n * Wrap the event with an observable\n * @private\n * @param event event name\n * @param element The element to attach the event listener to\n * @returns {Observable}\n */\n\n\nfunction wrapEventObservable(event, element) {\n  element = typeof window !== 'undefined' && element ? get(window, element) : element || (typeof window !== 'undefined' ? window : {});\n  return fromEvent(element, event);\n}\n\nexport function checkAvailability(plugin, methodName, pluginName) {\n  var pluginRef, pluginInstance, pluginPackage;\n\n  if (typeof plugin === 'string') {\n    pluginRef = plugin;\n  } else {\n    pluginRef = plugin.constructor.getPluginRef();\n    pluginName = plugin.constructor.getPluginName();\n    pluginPackage = plugin.constructor.getPluginInstallName();\n  }\n\n  pluginInstance = getPlugin(pluginRef);\n\n  if (!pluginInstance || !!methodName && typeof pluginInstance[methodName] === 'undefined') {\n    if (typeof window === 'undefined' || !window.cordova) {\n      cordovaWarn(pluginName, methodName);\n      return ERR_CORDOVA_NOT_AVAILABLE;\n    }\n\n    pluginWarn(pluginName, pluginPackage, methodName);\n    return ERR_PLUGIN_NOT_INSTALLED;\n  }\n\n  return true;\n}\n/**\n * Checks if _objectInstance exists and has the method/property\n * @private\n */\n\nexport function instanceAvailability(pluginObj, methodName) {\n  return pluginObj._objectInstance && (!methodName || typeof pluginObj._objectInstance[methodName] !== 'undefined');\n}\nexport function setIndex(args, opts, resolve, reject) {\n  if (opts === void 0) {\n    opts = {};\n  } // ignore resolve and reject in case sync\n\n\n  if (opts.sync) {\n    return args;\n  } // If the plugin method expects myMethod(success, err, options)\n\n\n  if (opts.callbackOrder === 'reverse') {\n    // Get those arguments in the order [resolve, reject, ...restOfArgs]\n    args.unshift(reject);\n    args.unshift(resolve);\n  } else if (opts.callbackStyle === 'node') {\n    args.push(function (err, result) {\n      if (err) {\n        reject(err);\n      } else {\n        resolve(result);\n      }\n    });\n  } else if (opts.callbackStyle === 'object' && opts.successName && opts.errorName) {\n    var obj = {};\n    obj[opts.successName] = resolve;\n    obj[opts.errorName] = reject;\n    args.push(obj);\n  } else if (typeof opts.successIndex !== 'undefined' || typeof opts.errorIndex !== 'undefined') {\n    var setSuccessIndex = function setSuccessIndex() {\n      // If we've specified a success/error index\n      if (opts.successIndex > args.length) {\n        args[opts.successIndex] = resolve;\n      } else {\n        args.splice(opts.successIndex, 0, resolve);\n      }\n    };\n\n    var setErrorIndex = function setErrorIndex() {\n      // We don't want that the reject cb gets spliced into the position of an optional argument that has not been\n      // defined and thus causing non expected behavior.\n      if (opts.errorIndex > args.length) {\n        args[opts.errorIndex] = reject; // insert the reject fn at the correct specific index\n      } else {\n        args.splice(opts.errorIndex, 0, reject); // otherwise just splice it into the array\n      }\n    };\n\n    if (opts.successIndex > opts.errorIndex) {\n      setErrorIndex();\n      setSuccessIndex();\n    } else {\n      setSuccessIndex();\n      setErrorIndex();\n    }\n  } else {\n    // Otherwise, let's tack them on to the end of the argument list\n    // which is 90% of cases\n    args.push(resolve);\n    args.push(reject);\n  }\n\n  return args;\n}\nexport function callCordovaPlugin(pluginObj, methodName, args, opts, resolve, reject) {\n  if (opts === void 0) {\n    opts = {};\n  } // Try to figure out where the success/error callbacks need to be bound\n  // to our promise resolve/reject handlers.\n\n\n  args = setIndex(args, opts, resolve, reject);\n  var availabilityCheck = checkAvailability(pluginObj, methodName);\n\n  if (availabilityCheck === true) {\n    var pluginInstance = getPlugin(pluginObj.constructor.getPluginRef());\n    return pluginInstance[methodName].apply(pluginInstance, args);\n  } else {\n    return availabilityCheck;\n  }\n}\nexport function callInstance(pluginObj, methodName, args, opts, resolve, reject) {\n  if (opts === void 0) {\n    opts = {};\n  }\n\n  args = setIndex(args, opts, resolve, reject);\n\n  if (instanceAvailability(pluginObj, methodName)) {\n    return pluginObj._objectInstance[methodName].apply(pluginObj._objectInstance, args);\n  }\n}\nexport function getPlugin(pluginRef) {\n  if (typeof window !== 'undefined') {\n    return get(window, pluginRef);\n  }\n\n  return null;\n}\nexport function get(element, path) {\n  var paths = path.split('.');\n  var obj = element;\n\n  for (var i = 0; i < paths.length; i++) {\n    if (!obj) {\n      return null;\n    }\n\n    obj = obj[paths[i]];\n  }\n\n  return obj;\n}\nexport function pluginWarn(pluginName, plugin, method) {\n  if (method) {\n    console.warn('Native: tried calling ' + pluginName + '.' + method + ', but the ' + pluginName + ' plugin is not installed.');\n  } else {\n    console.warn(\"Native: tried accessing the \" + pluginName + \" plugin but it's not installed.\");\n  }\n\n  if (plugin) {\n    console.warn(\"Install the \" + pluginName + \" plugin: 'ionic cordova plugin add \" + plugin + \"'\");\n  }\n}\n/**\n * @private\n * @param pluginName\n * @param method\n */\n\nexport function cordovaWarn(pluginName, method) {\n  if (typeof process === 'undefined') {\n    if (method) {\n      console.warn('Native: tried calling ' + pluginName + '.' + method + ', but Cordova is not available. Make sure to include cordova.js or run in a device/simulator');\n    } else {\n      console.warn('Native: tried accessing the ' + pluginName + ' plugin but Cordova is not available. Make sure to include cordova.js or run in a device/simulator');\n    }\n  }\n}\n/**\n * @private\n */\n\nexport var wrap = function wrap(pluginObj, methodName, opts) {\n  if (opts === void 0) {\n    opts = {};\n  }\n\n  return function () {\n    var args = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n\n    if (opts.sync) {\n      // Sync doesn't wrap the plugin with a promise or observable, it returns the result as-is\n      return callCordovaPlugin(pluginObj, methodName, args, opts);\n    } else if (opts.observable) {\n      return wrapObservable(pluginObj, methodName, args, opts);\n    } else if (opts.eventObservable && opts.event) {\n      return wrapEventObservable(opts.event, opts.element);\n    } else if (opts.otherPromise) {\n      return wrapOtherPromise(pluginObj, methodName, args, opts);\n    } else {\n      return wrapPromise(pluginObj, methodName, args, opts);\n    }\n  };\n};\n/**\n * @private\n */\n\nexport function wrapInstance(pluginObj, methodName, opts) {\n  if (opts === void 0) {\n    opts = {};\n  }\n\n  return function () {\n    var args = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n\n    if (opts.sync) {\n      return callInstance(pluginObj, methodName, args, opts);\n    } else if (opts.observable) {\n      return new Observable(function (observer) {\n        var pluginResult;\n\n        if (opts.destruct) {\n          pluginResult = callInstance(pluginObj, methodName, args, opts, function () {\n            var args = [];\n\n            for (var _i = 0; _i < arguments.length; _i++) {\n              args[_i] = arguments[_i];\n            }\n\n            return observer.next(args);\n          }, function () {\n            var args = [];\n\n            for (var _i = 0; _i < arguments.length; _i++) {\n              args[_i] = arguments[_i];\n            }\n\n            return observer.error(args);\n          });\n        } else {\n          pluginResult = callInstance(pluginObj, methodName, args, opts, observer.next.bind(observer), observer.error.bind(observer));\n        }\n\n        if (pluginResult && pluginResult.error) {\n          observer.error(pluginResult.error);\n        }\n\n        return function () {\n          try {\n            if (opts.clearWithArgs) {\n              return callInstance(pluginObj, opts.clearFunction, args, opts, observer.next.bind(observer), observer.error.bind(observer));\n            }\n\n            return callInstance(pluginObj, opts.clearFunction, []);\n          } catch (e) {\n            console.warn('Unable to clear the previous observable watch for', pluginObj.constructor.getPluginName(), methodName);\n            console.warn(e);\n          }\n        };\n      });\n    } else if (opts.otherPromise) {\n      return getPromise(function (resolve, reject) {\n        var result;\n\n        if (opts.destruct) {\n          result = callInstance(pluginObj, methodName, args, opts, function () {\n            var args = [];\n\n            for (var _i = 0; _i < arguments.length; _i++) {\n              args[_i] = arguments[_i];\n            }\n\n            return resolve(args);\n          }, function () {\n            var args = [];\n\n            for (var _i = 0; _i < arguments.length; _i++) {\n              args[_i] = arguments[_i];\n            }\n\n            return reject(args);\n          });\n        } else {\n          result = callInstance(pluginObj, methodName, args, opts, resolve, reject);\n        }\n\n        if (result && result.then) {\n          result.then(resolve, reject);\n        } else {\n          reject();\n        }\n      });\n    } else {\n      var pluginResult_1, rej_1;\n      var p = getPromise(function (resolve, reject) {\n        if (opts.destruct) {\n          pluginResult_1 = callInstance(pluginObj, methodName, args, opts, function () {\n            var args = [];\n\n            for (var _i = 0; _i < arguments.length; _i++) {\n              args[_i] = arguments[_i];\n            }\n\n            return resolve(args);\n          }, function () {\n            var args = [];\n\n            for (var _i = 0; _i < arguments.length; _i++) {\n              args[_i] = arguments[_i];\n            }\n\n            return reject(args);\n          });\n        } else {\n          pluginResult_1 = callInstance(pluginObj, methodName, args, opts, resolve, reject);\n        }\n\n        rej_1 = reject;\n      }); // Angular throws an error on unhandled rejection, but in this case we have already printed\n      // a warning that Cordova is undefined or the plugin is uninstalled, so there is no reason\n      // to error\n\n      if (pluginResult_1 && pluginResult_1.error) {\n        p.catch(function () {});\n        typeof rej_1 === 'function' && rej_1(pluginResult_1.error);\n      }\n\n      return p;\n    }\n  };\n} //# sourceMappingURL=common.js.map","map":{"version":3,"sources":["C:/Totvs/po-angular/node_modules/@ionic-native/core/__ivy_ngcc__/decorators/common.js"],"names":["fromEvent","Observable","ERR_CORDOVA_NOT_AVAILABLE","error","ERR_PLUGIN_NOT_INSTALLED","getPromise","callback","tryNativePromise","Promise","resolve","reject","console","window","angular","doc","document","injector","element","querySelector","body","$q","get","warn","wrapPromise","pluginObj","methodName","args","opts","pluginResult","rej","p","destruct","callCordovaPlugin","_i","arguments","length","catch","wrapOtherPromise","then","wrapObservable","observer","next","bind","complete","clearFunction","clearWithArgs","e","constructor","getPluginName","wrapEventObservable","event","checkAvailability","plugin","pluginName","pluginRef","pluginInstance","pluginPackage","getPluginRef","getPluginInstallName","getPlugin","cordova","cordovaWarn","pluginWarn","instanceAvailability","_objectInstance","setIndex","sync","callbackOrder","unshift","callbackStyle","push","err","result","successName","errorName","obj","successIndex","errorIndex","setSuccessIndex","splice","setErrorIndex","availabilityCheck","apply","callInstance","path","paths","split","i","method","process","wrap","observable","eventObservable","otherPromise","wrapInstance","pluginResult_1","rej_1"],"mappings":"AAAA,SAASA,SAAT,EAAoBC,UAApB,QAAsC,MAAtC;AACA,OAAO,IAAIC,yBAAyB,GAAG;AAAEC,EAAAA,KAAK,EAAE;AAAT,CAAhC;AACP,OAAO,IAAIC,wBAAwB,GAAG;AAAED,EAAAA,KAAK,EAAE;AAAT,CAA/B;AACP,OAAO,SAASE,UAAT,CAAoBC,QAApB,EAA8B;AACjC,MAAIC,gBAAgB,GAAG,SAAnBA,gBAAmB,GAAY;AAC/B,QAAIC,OAAJ,EAAa;AACT,aAAO,IAAIA,OAAJ,CAAY,UAAUC,OAAV,EAAmBC,MAAnB,EAA2B;AAC1CJ,QAAAA,QAAQ,CAACG,OAAD,EAAUC,MAAV,CAAR;AACH,OAFM,CAAP;AAGH,KAJD,MAKK;AACDC,MAAAA,OAAO,CAACR,KAAR,CAAc,0LAAd;AACH;AACJ,GATD;;AAUA,MAAI,OAAOS,MAAP,KAAkB,WAAlB,IAAiCA,MAAM,CAACC,OAA5C,EAAqD;AACjD,QAAIC,GAAG,GAAGF,MAAM,CAACG,QAAjB;AACA,QAAIC,QAAQ,GAAGJ,MAAM,CAACC,OAAP,CAAeI,OAAf,CAAuBH,GAAG,CAACI,aAAJ,CAAkB,UAAlB,KAAiCJ,GAAG,CAACK,IAA5D,EAAkEH,QAAlE,EAAf;;AACA,QAAIA,QAAJ,EAAc;AACV,UAAII,EAAE,GAAGJ,QAAQ,CAACK,GAAT,CAAa,IAAb,CAAT;AACA,aAAOD,EAAE,CAAC,UAAUX,OAAV,EAAmBC,MAAnB,EAA2B;AACjCJ,QAAAA,QAAQ,CAACG,OAAD,EAAUC,MAAV,CAAR;AACH,OAFQ,CAAT;AAGH;;AACDC,IAAAA,OAAO,CAACW,IAAR,CAAa,+NAAb;AACH;;AACD,SAAOf,gBAAgB,EAAvB;AACH;AACD,OAAO,SAASgB,WAAT,CAAqBC,SAArB,EAAgCC,UAAhC,EAA4CC,IAA5C,EAAkDC,IAAlD,EAAwD;AAC3D,MAAIA,IAAI,KAAK,KAAK,CAAlB,EAAqB;AAAEA,IAAAA,IAAI,GAAG,EAAP;AAAY;;AACnC,MAAIC,YAAJ,EAAkBC,GAAlB;AACA,MAAIC,CAAC,GAAGzB,UAAU,CAAC,UAAUI,OAAV,EAAmBC,MAAnB,EAA2B;AAC1C,QAAIiB,IAAI,CAACI,QAAT,EAAmB;AACfH,MAAAA,YAAY,GAAGI,iBAAiB,CAACR,SAAD,EAAYC,UAAZ,EAAwBC,IAAxB,EAA8BC,IAA9B,EAAoC,YAAY;AAC5E,YAAID,IAAI,GAAG,EAAX;;AACA,aAAK,IAAIO,EAAE,GAAG,CAAd,EAAiBA,EAAE,GAAGC,SAAS,CAACC,MAAhC,EAAwCF,EAAE,EAA1C,EAA8C;AAC1CP,UAAAA,IAAI,CAACO,EAAD,CAAJ,GAAWC,SAAS,CAACD,EAAD,CAApB;AACH;;AACD,eAAOxB,OAAO,CAACiB,IAAD,CAAd;AACH,OAN+B,EAM7B,YAAY;AACX,YAAIA,IAAI,GAAG,EAAX;;AACA,aAAK,IAAIO,EAAE,GAAG,CAAd,EAAiBA,EAAE,GAAGC,SAAS,CAACC,MAAhC,EAAwCF,EAAE,EAA1C,EAA8C;AAC1CP,UAAAA,IAAI,CAACO,EAAD,CAAJ,GAAWC,SAAS,CAACD,EAAD,CAApB;AACH;;AACD,eAAOvB,MAAM,CAACgB,IAAD,CAAb;AACH,OAZ+B,CAAhC;AAaH,KAdD,MAeK;AACDE,MAAAA,YAAY,GAAGI,iBAAiB,CAACR,SAAD,EAAYC,UAAZ,EAAwBC,IAAxB,EAA8BC,IAA9B,EAAoClB,OAApC,EAA6CC,MAA7C,CAAhC;AACH;;AACDmB,IAAAA,GAAG,GAAGnB,MAAN;AACH,GApBiB,CAAlB,CAH2D,CAwB3D;AACA;AACA;;AACA,MAAIkB,YAAY,IAAIA,YAAY,CAACzB,KAAjC,EAAwC;AACpC2B,IAAAA,CAAC,CAACM,KAAF,CAAQ,YAAY,CAAG,CAAvB;AACA,WAAOP,GAAP,KAAe,UAAf,IAA6BA,GAAG,CAACD,YAAY,CAACzB,KAAd,CAAhC;AACH;;AACD,SAAO2B,CAAP;AACH;;AACD,SAASO,gBAAT,CAA0Bb,SAA1B,EAAqCC,UAArC,EAAiDC,IAAjD,EAAuDC,IAAvD,EAA6D;AACzD,MAAIA,IAAI,KAAK,KAAK,CAAlB,EAAqB;AAAEA,IAAAA,IAAI,GAAG,EAAP;AAAY;;AACnC,SAAOtB,UAAU,CAAC,UAAUI,OAAV,EAAmBC,MAAnB,EAA2B;AACzC,QAAIkB,YAAY,GAAGI,iBAAiB,CAACR,SAAD,EAAYC,UAAZ,EAAwBC,IAAxB,EAA8BC,IAA9B,CAApC;;AACA,QAAIC,YAAJ,EAAkB;AACd,UAAIA,YAAY,CAACzB,KAAjB,EAAwB;AACpBO,QAAAA,MAAM,CAACkB,YAAY,CAACzB,KAAd,CAAN;AACH,OAFD,MAGK,IAAIyB,YAAY,CAACU,IAAjB,EAAuB;AACxBV,QAAAA,YAAY,CAACU,IAAb,CAAkB7B,OAAlB,EAA2B2B,KAA3B,CAAiC1B,MAAjC;AACH;AACJ,KAPD,MAQK;AACDA,MAAAA,MAAM,CAAC;AAAEP,QAAAA,KAAK,EAAE;AAAT,OAAD,CAAN;AACH;AACJ,GAbgB,CAAjB;AAcH;;AACD,SAASoC,cAAT,CAAwBf,SAAxB,EAAmCC,UAAnC,EAA+CC,IAA/C,EAAqDC,IAArD,EAA2D;AACvD,MAAIA,IAAI,KAAK,KAAK,CAAlB,EAAqB;AAAEA,IAAAA,IAAI,GAAG,EAAP;AAAY;;AACnC,SAAO,IAAI1B,UAAJ,CAAe,UAAUuC,QAAV,EAAoB;AACtC,QAAIZ,YAAJ;;AACA,QAAID,IAAI,CAACI,QAAT,EAAmB;AACfH,MAAAA,YAAY,GAAGI,iBAAiB,CAACR,SAAD,EAAYC,UAAZ,EAAwBC,IAAxB,EAA8BC,IAA9B,EAAoC,YAAY;AAC5E,YAAID,IAAI,GAAG,EAAX;;AACA,aAAK,IAAIO,EAAE,GAAG,CAAd,EAAiBA,EAAE,GAAGC,SAAS,CAACC,MAAhC,EAAwCF,EAAE,EAA1C,EAA8C;AAC1CP,UAAAA,IAAI,CAACO,EAAD,CAAJ,GAAWC,SAAS,CAACD,EAAD,CAApB;AACH;;AACD,eAAOO,QAAQ,CAACC,IAAT,CAAcf,IAAd,CAAP;AACH,OAN+B,EAM7B,YAAY;AACX,YAAIA,IAAI,GAAG,EAAX;;AACA,aAAK,IAAIO,EAAE,GAAG,CAAd,EAAiBA,EAAE,GAAGC,SAAS,CAACC,MAAhC,EAAwCF,EAAE,EAA1C,EAA8C;AAC1CP,UAAAA,IAAI,CAACO,EAAD,CAAJ,GAAWC,SAAS,CAACD,EAAD,CAApB;AACH;;AACD,eAAOO,QAAQ,CAACrC,KAAT,CAAeuB,IAAf,CAAP;AACH,OAZ+B,CAAhC;AAaH,KAdD,MAeK;AACDE,MAAAA,YAAY,GAAGI,iBAAiB,CAACR,SAAD,EAAYC,UAAZ,EAAwBC,IAAxB,EAA8BC,IAA9B,EAAoCa,QAAQ,CAACC,IAAT,CAAcC,IAAd,CAAmBF,QAAnB,CAApC,EAAkEA,QAAQ,CAACrC,KAAT,CAAeuC,IAAf,CAAoBF,QAApB,CAAlE,CAAhC;AACH;;AACD,QAAIZ,YAAY,IAAIA,YAAY,CAACzB,KAAjC,EAAwC;AACpCqC,MAAAA,QAAQ,CAACrC,KAAT,CAAeyB,YAAY,CAACzB,KAA5B;AACAqC,MAAAA,QAAQ,CAACG,QAAT;AACH;;AACD,WAAO,YAAY;AACf,UAAI;AACA,YAAIhB,IAAI,CAACiB,aAAT,EAAwB;AACpB,cAAIjB,IAAI,CAACkB,aAAT,EAAwB;AACpB,mBAAOb,iBAAiB,CAACR,SAAD,EAAYG,IAAI,CAACiB,aAAjB,EAAgClB,IAAhC,EAAsCC,IAAtC,EAA4Ca,QAAQ,CAACC,IAAT,CAAcC,IAAd,CAAmBF,QAAnB,CAA5C,EAA0EA,QAAQ,CAACrC,KAAT,CAAeuC,IAAf,CAAoBF,QAApB,CAA1E,CAAxB;AACH;;AACD,iBAAOR,iBAAiB,CAACR,SAAD,EAAYG,IAAI,CAACiB,aAAjB,EAAgC,EAAhC,CAAxB;AACH;AACJ,OAPD,CAQA,OAAOE,CAAP,EAAU;AACNnC,QAAAA,OAAO,CAACW,IAAR,CAAa,mDAAb,EAAkEE,SAAS,CAACuB,WAAV,CAAsBC,aAAtB,EAAlE,EAAyGvB,UAAzG;AACAd,QAAAA,OAAO,CAACW,IAAR,CAAawB,CAAb;AACH;AACJ,KAbD;AAcH,GAtCM,CAAP;AAuCH;AACD;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,SAASG,mBAAT,CAA6BC,KAA7B,EAAoCjC,OAApC,EAA6C;AACzCA,EAAAA,OAAO,GACH,OAAOL,MAAP,KAAkB,WAAlB,IAAiCK,OAAjC,GACMI,GAAG,CAACT,MAAD,EAASK,OAAT,CADT,GAEMA,OAAO,KAAK,OAAOL,MAAP,KAAkB,WAAlB,GAAgCA,MAAhC,GAAyC,EAA9C,CAHjB;AAIA,SAAOZ,SAAS,CAACiB,OAAD,EAAUiC,KAAV,CAAhB;AACH;;AACD,OAAO,SAASC,iBAAT,CAA2BC,MAA3B,EAAmC3B,UAAnC,EAA+C4B,UAA/C,EAA2D;AAC9D,MAAIC,SAAJ,EAAeC,cAAf,EAA+BC,aAA/B;;AACA,MAAI,OAAOJ,MAAP,KAAkB,QAAtB,EAAgC;AAC5BE,IAAAA,SAAS,GAAGF,MAAZ;AACH,GAFD,MAGK;AACDE,IAAAA,SAAS,GAAGF,MAAM,CAACL,WAAP,CAAmBU,YAAnB,EAAZ;AACAJ,IAAAA,UAAU,GAAGD,MAAM,CAACL,WAAP,CAAmBC,aAAnB,EAAb;AACAQ,IAAAA,aAAa,GAAGJ,MAAM,CAACL,WAAP,CAAmBW,oBAAnB,EAAhB;AACH;;AACDH,EAAAA,cAAc,GAAGI,SAAS,CAACL,SAAD,CAA1B;;AACA,MAAI,CAACC,cAAD,IAAoB,CAAC,CAAC9B,UAAF,IAAgB,OAAO8B,cAAc,CAAC9B,UAAD,CAArB,KAAsC,WAA9E,EAA4F;AACxF,QAAI,OAAOb,MAAP,KAAkB,WAAlB,IAAiC,CAACA,MAAM,CAACgD,OAA7C,EAAsD;AAClDC,MAAAA,WAAW,CAACR,UAAD,EAAa5B,UAAb,CAAX;AACA,aAAOvB,yBAAP;AACH;;AACD4D,IAAAA,UAAU,CAACT,UAAD,EAAaG,aAAb,EAA4B/B,UAA5B,CAAV;AACA,WAAOrB,wBAAP;AACH;;AACD,SAAO,IAAP;AACH;AACD;AACA;AACA;AACA;;AACA,OAAO,SAAS2D,oBAAT,CAA8BvC,SAA9B,EAAyCC,UAAzC,EAAqD;AACxD,SAAOD,SAAS,CAACwC,eAAV,KAA8B,CAACvC,UAAD,IAAe,OAAOD,SAAS,CAACwC,eAAV,CAA0BvC,UAA1B,CAAP,KAAiD,WAA9F,CAAP;AACH;AACD,OAAO,SAASwC,QAAT,CAAkBvC,IAAlB,EAAwBC,IAAxB,EAA8BlB,OAA9B,EAAuCC,MAAvC,EAA+C;AAClD,MAAIiB,IAAI,KAAK,KAAK,CAAlB,EAAqB;AAAEA,IAAAA,IAAI,GAAG,EAAP;AAAY,GADe,CAElD;;;AACA,MAAIA,IAAI,CAACuC,IAAT,EAAe;AACX,WAAOxC,IAAP;AACH,GALiD,CAMlD;;;AACA,MAAIC,IAAI,CAACwC,aAAL,KAAuB,SAA3B,EAAsC;AAClC;AACAzC,IAAAA,IAAI,CAAC0C,OAAL,CAAa1D,MAAb;AACAgB,IAAAA,IAAI,CAAC0C,OAAL,CAAa3D,OAAb;AACH,GAJD,MAKK,IAAIkB,IAAI,CAAC0C,aAAL,KAAuB,MAA3B,EAAmC;AACpC3C,IAAAA,IAAI,CAAC4C,IAAL,CAAU,UAAUC,GAAV,EAAeC,MAAf,EAAuB;AAC7B,UAAID,GAAJ,EAAS;AACL7D,QAAAA,MAAM,CAAC6D,GAAD,CAAN;AACH,OAFD,MAGK;AACD9D,QAAAA,OAAO,CAAC+D,MAAD,CAAP;AACH;AACJ,KAPD;AAQH,GATI,MAUA,IAAI7C,IAAI,CAAC0C,aAAL,KAAuB,QAAvB,IAAmC1C,IAAI,CAAC8C,WAAxC,IAAuD9C,IAAI,CAAC+C,SAAhE,EAA2E;AAC5E,QAAIC,GAAG,GAAG,EAAV;AACAA,IAAAA,GAAG,CAAChD,IAAI,CAAC8C,WAAN,CAAH,GAAwBhE,OAAxB;AACAkE,IAAAA,GAAG,CAAChD,IAAI,CAAC+C,SAAN,CAAH,GAAsBhE,MAAtB;AACAgB,IAAAA,IAAI,CAAC4C,IAAL,CAAUK,GAAV;AACH,GALI,MAMA,IAAI,OAAOhD,IAAI,CAACiD,YAAZ,KAA6B,WAA7B,IAA4C,OAAOjD,IAAI,CAACkD,UAAZ,KAA2B,WAA3E,EAAwF;AACzF,QAAIC,eAAe,GAAG,SAAlBA,eAAkB,GAAY;AAC9B;AACA,UAAInD,IAAI,CAACiD,YAAL,GAAoBlD,IAAI,CAACS,MAA7B,EAAqC;AACjCT,QAAAA,IAAI,CAACC,IAAI,CAACiD,YAAN,CAAJ,GAA0BnE,OAA1B;AACH,OAFD,MAGK;AACDiB,QAAAA,IAAI,CAACqD,MAAL,CAAYpD,IAAI,CAACiD,YAAjB,EAA+B,CAA/B,EAAkCnE,OAAlC;AACH;AACJ,KARD;;AASA,QAAIuE,aAAa,GAAG,SAAhBA,aAAgB,GAAY;AAC5B;AACA;AACA,UAAIrD,IAAI,CAACkD,UAAL,GAAkBnD,IAAI,CAACS,MAA3B,EAAmC;AAC/BT,QAAAA,IAAI,CAACC,IAAI,CAACkD,UAAN,CAAJ,GAAwBnE,MAAxB,CAD+B,CACC;AACnC,OAFD,MAGK;AACDgB,QAAAA,IAAI,CAACqD,MAAL,CAAYpD,IAAI,CAACkD,UAAjB,EAA6B,CAA7B,EAAgCnE,MAAhC,EADC,CACwC;AAC5C;AACJ,KATD;;AAUA,QAAIiB,IAAI,CAACiD,YAAL,GAAoBjD,IAAI,CAACkD,UAA7B,EAAyC;AACrCG,MAAAA,aAAa;AACbF,MAAAA,eAAe;AAClB,KAHD,MAIK;AACDA,MAAAA,eAAe;AACfE,MAAAA,aAAa;AAChB;AACJ,GA5BI,MA6BA;AACD;AACA;AACAtD,IAAAA,IAAI,CAAC4C,IAAL,CAAU7D,OAAV;AACAiB,IAAAA,IAAI,CAAC4C,IAAL,CAAU5D,MAAV;AACH;;AACD,SAAOgB,IAAP;AACH;AACD,OAAO,SAASM,iBAAT,CAA2BR,SAA3B,EAAsCC,UAAtC,EAAkDC,IAAlD,EAAwDC,IAAxD,EAA8DlB,OAA9D,EAAuEC,MAAvE,EAA+E;AAClF,MAAIiB,IAAI,KAAK,KAAK,CAAlB,EAAqB;AAAEA,IAAAA,IAAI,GAAG,EAAP;AAAY,GAD+C,CAElF;AACA;;;AACAD,EAAAA,IAAI,GAAGuC,QAAQ,CAACvC,IAAD,EAAOC,IAAP,EAAalB,OAAb,EAAsBC,MAAtB,CAAf;AACA,MAAIuE,iBAAiB,GAAG9B,iBAAiB,CAAC3B,SAAD,EAAYC,UAAZ,CAAzC;;AACA,MAAIwD,iBAAiB,KAAK,IAA1B,EAAgC;AAC5B,QAAI1B,cAAc,GAAGI,SAAS,CAACnC,SAAS,CAACuB,WAAV,CAAsBU,YAAtB,EAAD,CAA9B;AACA,WAAOF,cAAc,CAAC9B,UAAD,CAAd,CAA2ByD,KAA3B,CAAiC3B,cAAjC,EAAiD7B,IAAjD,CAAP;AACH,GAHD,MAIK;AACD,WAAOuD,iBAAP;AACH;AACJ;AACD,OAAO,SAASE,YAAT,CAAsB3D,SAAtB,EAAiCC,UAAjC,EAA6CC,IAA7C,EAAmDC,IAAnD,EAAyDlB,OAAzD,EAAkEC,MAAlE,EAA0E;AAC7E,MAAIiB,IAAI,KAAK,KAAK,CAAlB,EAAqB;AAAEA,IAAAA,IAAI,GAAG,EAAP;AAAY;;AACnCD,EAAAA,IAAI,GAAGuC,QAAQ,CAACvC,IAAD,EAAOC,IAAP,EAAalB,OAAb,EAAsBC,MAAtB,CAAf;;AACA,MAAIqD,oBAAoB,CAACvC,SAAD,EAAYC,UAAZ,CAAxB,EAAiD;AAC7C,WAAOD,SAAS,CAACwC,eAAV,CAA0BvC,UAA1B,EAAsCyD,KAAtC,CAA4C1D,SAAS,CAACwC,eAAtD,EAAuEtC,IAAvE,CAAP;AACH;AACJ;AACD,OAAO,SAASiC,SAAT,CAAmBL,SAAnB,EAA8B;AACjC,MAAI,OAAO1C,MAAP,KAAkB,WAAtB,EAAmC;AAC/B,WAAOS,GAAG,CAACT,MAAD,EAAS0C,SAAT,CAAV;AACH;;AACD,SAAO,IAAP;AACH;AACD,OAAO,SAASjC,GAAT,CAAaJ,OAAb,EAAsBmE,IAAtB,EAA4B;AAC/B,MAAIC,KAAK,GAAGD,IAAI,CAACE,KAAL,CAAW,GAAX,CAAZ;AACA,MAAIX,GAAG,GAAG1D,OAAV;;AACA,OAAK,IAAIsE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,KAAK,CAAClD,MAA1B,EAAkCoD,CAAC,EAAnC,EAAuC;AACnC,QAAI,CAACZ,GAAL,EAAU;AACN,aAAO,IAAP;AACH;;AACDA,IAAAA,GAAG,GAAGA,GAAG,CAACU,KAAK,CAACE,CAAD,CAAN,CAAT;AACH;;AACD,SAAOZ,GAAP;AACH;AACD,OAAO,SAASb,UAAT,CAAoBT,UAApB,EAAgCD,MAAhC,EAAwCoC,MAAxC,EAAgD;AACnD,MAAIA,MAAJ,EAAY;AACR7E,IAAAA,OAAO,CAACW,IAAR,CAAa,2BAA2B+B,UAA3B,GAAwC,GAAxC,GAA8CmC,MAA9C,GAAuD,YAAvD,GAAsEnC,UAAtE,GAAmF,2BAAhG;AACH,GAFD,MAGK;AACD1C,IAAAA,OAAO,CAACW,IAAR,CAAa,iCAAiC+B,UAAjC,GAA8C,iCAA3D;AACH;;AACD,MAAID,MAAJ,EAAY;AACRzC,IAAAA,OAAO,CAACW,IAAR,CAAa,iBAAiB+B,UAAjB,GAA8B,qCAA9B,GAAsED,MAAtE,GAA+E,GAA5F;AACH;AACJ;AACD;AACA;AACA;AACA;AACA;;AACA,OAAO,SAASS,WAAT,CAAqBR,UAArB,EAAiCmC,MAAjC,EAAyC;AAC5C,MAAI,OAAOC,OAAP,KAAmB,WAAvB,EAAoC;AAChC,QAAID,MAAJ,EAAY;AACR7E,MAAAA,OAAO,CAACW,IAAR,CAAa,2BACT+B,UADS,GAET,GAFS,GAGTmC,MAHS,GAIT,8FAJJ;AAKH,KAND,MAOK;AACD7E,MAAAA,OAAO,CAACW,IAAR,CAAa,iCACT+B,UADS,GAET,oGAFJ;AAGH;AACJ;AACJ;AACD;AACA;AACA;;AACA,OAAO,IAAIqC,IAAI,GAAG,SAAPA,IAAO,CAAUlE,SAAV,EAAqBC,UAArB,EAAiCE,IAAjC,EAAuC;AACrD,MAAIA,IAAI,KAAK,KAAK,CAAlB,EAAqB;AAAEA,IAAAA,IAAI,GAAG,EAAP;AAAY;;AACnC,SAAO,YAAY;AACf,QAAID,IAAI,GAAG,EAAX;;AACA,SAAK,IAAIO,EAAE,GAAG,CAAd,EAAiBA,EAAE,GAAGC,SAAS,CAACC,MAAhC,EAAwCF,EAAE,EAA1C,EAA8C;AAC1CP,MAAAA,IAAI,CAACO,EAAD,CAAJ,GAAWC,SAAS,CAACD,EAAD,CAApB;AACH;;AACD,QAAIN,IAAI,CAACuC,IAAT,EAAe;AACX;AACA,aAAOlC,iBAAiB,CAACR,SAAD,EAAYC,UAAZ,EAAwBC,IAAxB,EAA8BC,IAA9B,CAAxB;AACH,KAHD,MAIK,IAAIA,IAAI,CAACgE,UAAT,EAAqB;AACtB,aAAOpD,cAAc,CAACf,SAAD,EAAYC,UAAZ,EAAwBC,IAAxB,EAA8BC,IAA9B,CAArB;AACH,KAFI,MAGA,IAAIA,IAAI,CAACiE,eAAL,IAAwBjE,IAAI,CAACuB,KAAjC,EAAwC;AACzC,aAAOD,mBAAmB,CAACtB,IAAI,CAACuB,KAAN,EAAavB,IAAI,CAACV,OAAlB,CAA1B;AACH,KAFI,MAGA,IAAIU,IAAI,CAACkE,YAAT,EAAuB;AACxB,aAAOxD,gBAAgB,CAACb,SAAD,EAAYC,UAAZ,EAAwBC,IAAxB,EAA8BC,IAA9B,CAAvB;AACH,KAFI,MAGA;AACD,aAAOJ,WAAW,CAACC,SAAD,EAAYC,UAAZ,EAAwBC,IAAxB,EAA8BC,IAA9B,CAAlB;AACH;AACJ,GArBD;AAsBH,CAxBM;AAyBP;AACA;AACA;;AACA,OAAO,SAASmE,YAAT,CAAsBtE,SAAtB,EAAiCC,UAAjC,EAA6CE,IAA7C,EAAmD;AACtD,MAAIA,IAAI,KAAK,KAAK,CAAlB,EAAqB;AAAEA,IAAAA,IAAI,GAAG,EAAP;AAAY;;AACnC,SAAO,YAAY;AACf,QAAID,IAAI,GAAG,EAAX;;AACA,SAAK,IAAIO,EAAE,GAAG,CAAd,EAAiBA,EAAE,GAAGC,SAAS,CAACC,MAAhC,EAAwCF,EAAE,EAA1C,EAA8C;AAC1CP,MAAAA,IAAI,CAACO,EAAD,CAAJ,GAAWC,SAAS,CAACD,EAAD,CAApB;AACH;;AACD,QAAIN,IAAI,CAACuC,IAAT,EAAe;AACX,aAAOiB,YAAY,CAAC3D,SAAD,EAAYC,UAAZ,EAAwBC,IAAxB,EAA8BC,IAA9B,CAAnB;AACH,KAFD,MAGK,IAAIA,IAAI,CAACgE,UAAT,EAAqB;AACtB,aAAO,IAAI1F,UAAJ,CAAe,UAAUuC,QAAV,EAAoB;AACtC,YAAIZ,YAAJ;;AACA,YAAID,IAAI,CAACI,QAAT,EAAmB;AACfH,UAAAA,YAAY,GAAGuD,YAAY,CAAC3D,SAAD,EAAYC,UAAZ,EAAwBC,IAAxB,EAA8BC,IAA9B,EAAoC,YAAY;AACvE,gBAAID,IAAI,GAAG,EAAX;;AACA,iBAAK,IAAIO,EAAE,GAAG,CAAd,EAAiBA,EAAE,GAAGC,SAAS,CAACC,MAAhC,EAAwCF,EAAE,EAA1C,EAA8C;AAC1CP,cAAAA,IAAI,CAACO,EAAD,CAAJ,GAAWC,SAAS,CAACD,EAAD,CAApB;AACH;;AACD,mBAAOO,QAAQ,CAACC,IAAT,CAAcf,IAAd,CAAP;AACH,WAN0B,EAMxB,YAAY;AACX,gBAAIA,IAAI,GAAG,EAAX;;AACA,iBAAK,IAAIO,EAAE,GAAG,CAAd,EAAiBA,EAAE,GAAGC,SAAS,CAACC,MAAhC,EAAwCF,EAAE,EAA1C,EAA8C;AAC1CP,cAAAA,IAAI,CAACO,EAAD,CAAJ,GAAWC,SAAS,CAACD,EAAD,CAApB;AACH;;AACD,mBAAOO,QAAQ,CAACrC,KAAT,CAAeuB,IAAf,CAAP;AACH,WAZ0B,CAA3B;AAaH,SAdD,MAeK;AACDE,UAAAA,YAAY,GAAGuD,YAAY,CAAC3D,SAAD,EAAYC,UAAZ,EAAwBC,IAAxB,EAA8BC,IAA9B,EAAoCa,QAAQ,CAACC,IAAT,CAAcC,IAAd,CAAmBF,QAAnB,CAApC,EAAkEA,QAAQ,CAACrC,KAAT,CAAeuC,IAAf,CAAoBF,QAApB,CAAlE,CAA3B;AACH;;AACD,YAAIZ,YAAY,IAAIA,YAAY,CAACzB,KAAjC,EAAwC;AACpCqC,UAAAA,QAAQ,CAACrC,KAAT,CAAeyB,YAAY,CAACzB,KAA5B;AACH;;AACD,eAAO,YAAY;AACf,cAAI;AACA,gBAAIwB,IAAI,CAACkB,aAAT,EAAwB;AACpB,qBAAOsC,YAAY,CAAC3D,SAAD,EAAYG,IAAI,CAACiB,aAAjB,EAAgClB,IAAhC,EAAsCC,IAAtC,EAA4Ca,QAAQ,CAACC,IAAT,CAAcC,IAAd,CAAmBF,QAAnB,CAA5C,EAA0EA,QAAQ,CAACrC,KAAT,CAAeuC,IAAf,CAAoBF,QAApB,CAA1E,CAAnB;AACH;;AACD,mBAAO2C,YAAY,CAAC3D,SAAD,EAAYG,IAAI,CAACiB,aAAjB,EAAgC,EAAhC,CAAnB;AACH,WALD,CAMA,OAAOE,CAAP,EAAU;AACNnC,YAAAA,OAAO,CAACW,IAAR,CAAa,mDAAb,EAAkEE,SAAS,CAACuB,WAAV,CAAsBC,aAAtB,EAAlE,EAAyGvB,UAAzG;AACAd,YAAAA,OAAO,CAACW,IAAR,CAAawB,CAAb;AACH;AACJ,SAXD;AAYH,OAnCM,CAAP;AAoCH,KArCI,MAsCA,IAAInB,IAAI,CAACkE,YAAT,EAAuB;AACxB,aAAOxF,UAAU,CAAC,UAAUI,OAAV,EAAmBC,MAAnB,EAA2B;AACzC,YAAI8D,MAAJ;;AACA,YAAI7C,IAAI,CAACI,QAAT,EAAmB;AACfyC,UAAAA,MAAM,GAAGW,YAAY,CAAC3D,SAAD,EAAYC,UAAZ,EAAwBC,IAAxB,EAA8BC,IAA9B,EAAoC,YAAY;AACjE,gBAAID,IAAI,GAAG,EAAX;;AACA,iBAAK,IAAIO,EAAE,GAAG,CAAd,EAAiBA,EAAE,GAAGC,SAAS,CAACC,MAAhC,EAAwCF,EAAE,EAA1C,EAA8C;AAC1CP,cAAAA,IAAI,CAACO,EAAD,CAAJ,GAAWC,SAAS,CAACD,EAAD,CAApB;AACH;;AACD,mBAAOxB,OAAO,CAACiB,IAAD,CAAd;AACH,WANoB,EAMlB,YAAY;AACX,gBAAIA,IAAI,GAAG,EAAX;;AACA,iBAAK,IAAIO,EAAE,GAAG,CAAd,EAAiBA,EAAE,GAAGC,SAAS,CAACC,MAAhC,EAAwCF,EAAE,EAA1C,EAA8C;AAC1CP,cAAAA,IAAI,CAACO,EAAD,CAAJ,GAAWC,SAAS,CAACD,EAAD,CAApB;AACH;;AACD,mBAAOvB,MAAM,CAACgB,IAAD,CAAb;AACH,WAZoB,CAArB;AAaH,SAdD,MAeK;AACD8C,UAAAA,MAAM,GAAGW,YAAY,CAAC3D,SAAD,EAAYC,UAAZ,EAAwBC,IAAxB,EAA8BC,IAA9B,EAAoClB,OAApC,EAA6CC,MAA7C,CAArB;AACH;;AACD,YAAI8D,MAAM,IAAIA,MAAM,CAAClC,IAArB,EAA2B;AACvBkC,UAAAA,MAAM,CAAClC,IAAP,CAAY7B,OAAZ,EAAqBC,MAArB;AACH,SAFD,MAGK;AACDA,UAAAA,MAAM;AACT;AACJ,OA1BgB,CAAjB;AA2BH,KA5BI,MA6BA;AACD,UAAIqF,cAAJ,EAAoBC,KAApB;AACA,UAAIlE,CAAC,GAAGzB,UAAU,CAAC,UAAUI,OAAV,EAAmBC,MAAnB,EAA2B;AAC1C,YAAIiB,IAAI,CAACI,QAAT,EAAmB;AACfgE,UAAAA,cAAc,GAAGZ,YAAY,CAAC3D,SAAD,EAAYC,UAAZ,EAAwBC,IAAxB,EAA8BC,IAA9B,EAAoC,YAAY;AACzE,gBAAID,IAAI,GAAG,EAAX;;AACA,iBAAK,IAAIO,EAAE,GAAG,CAAd,EAAiBA,EAAE,GAAGC,SAAS,CAACC,MAAhC,EAAwCF,EAAE,EAA1C,EAA8C;AAC1CP,cAAAA,IAAI,CAACO,EAAD,CAAJ,GAAWC,SAAS,CAACD,EAAD,CAApB;AACH;;AACD,mBAAOxB,OAAO,CAACiB,IAAD,CAAd;AACH,WAN4B,EAM1B,YAAY;AACX,gBAAIA,IAAI,GAAG,EAAX;;AACA,iBAAK,IAAIO,EAAE,GAAG,CAAd,EAAiBA,EAAE,GAAGC,SAAS,CAACC,MAAhC,EAAwCF,EAAE,EAA1C,EAA8C;AAC1CP,cAAAA,IAAI,CAACO,EAAD,CAAJ,GAAWC,SAAS,CAACD,EAAD,CAApB;AACH;;AACD,mBAAOvB,MAAM,CAACgB,IAAD,CAAb;AACH,WAZ4B,CAA7B;AAaH,SAdD,MAeK;AACDqE,UAAAA,cAAc,GAAGZ,YAAY,CAAC3D,SAAD,EAAYC,UAAZ,EAAwBC,IAAxB,EAA8BC,IAA9B,EAAoClB,OAApC,EAA6CC,MAA7C,CAA7B;AACH;;AACDsF,QAAAA,KAAK,GAAGtF,MAAR;AACH,OApBiB,CAAlB,CAFC,CAuBD;AACA;AACA;;AACA,UAAIqF,cAAc,IAAIA,cAAc,CAAC5F,KAArC,EAA4C;AACxC2B,QAAAA,CAAC,CAACM,KAAF,CAAQ,YAAY,CAAG,CAAvB;AACA,eAAO4D,KAAP,KAAiB,UAAjB,IAA+BA,KAAK,CAACD,cAAc,CAAC5F,KAAhB,CAApC;AACH;;AACD,aAAO2B,CAAP;AACH;AACJ,GA3GD;AA4GH,C,CACD","sourcesContent":["import { fromEvent, Observable } from 'rxjs';\nexport var ERR_CORDOVA_NOT_AVAILABLE = { error: 'cordova_not_available' };\nexport var ERR_PLUGIN_NOT_INSTALLED = { error: 'plugin_not_installed' };\nexport function getPromise(callback) {\n    var tryNativePromise = function () {\n        if (Promise) {\n            return new Promise(function (resolve, reject) {\n                callback(resolve, reject);\n            });\n        }\n        else {\n            console.error('No Promise support or polyfill found. To enable Ionic Native support, please add the es6-promise polyfill before this script, or run with a library like Angular or on a recent browser.');\n        }\n    };\n    if (typeof window !== 'undefined' && window.angular) {\n        var doc = window.document;\n        var injector = window.angular.element(doc.querySelector('[ng-app]') || doc.body).injector();\n        if (injector) {\n            var $q = injector.get('$q');\n            return $q(function (resolve, reject) {\n                callback(resolve, reject);\n            });\n        }\n        console.warn(\"Angular 1 was detected but $q couldn't be retrieved. This is usually when the app is not bootstrapped on the html or body tag. Falling back to native promises which won't trigger an automatic digest when promises resolve.\");\n    }\n    return tryNativePromise();\n}\nexport function wrapPromise(pluginObj, methodName, args, opts) {\n    if (opts === void 0) { opts = {}; }\n    var pluginResult, rej;\n    var p = getPromise(function (resolve, reject) {\n        if (opts.destruct) {\n            pluginResult = callCordovaPlugin(pluginObj, methodName, args, opts, function () {\n                var args = [];\n                for (var _i = 0; _i < arguments.length; _i++) {\n                    args[_i] = arguments[_i];\n                }\n                return resolve(args);\n            }, function () {\n                var args = [];\n                for (var _i = 0; _i < arguments.length; _i++) {\n                    args[_i] = arguments[_i];\n                }\n                return reject(args);\n            });\n        }\n        else {\n            pluginResult = callCordovaPlugin(pluginObj, methodName, args, opts, resolve, reject);\n        }\n        rej = reject;\n    });\n    // Angular throws an error on unhandled rejection, but in this case we have already printed\n    // a warning that Cordova is undefined or the plugin is uninstalled, so there is no reason\n    // to error\n    if (pluginResult && pluginResult.error) {\n        p.catch(function () { });\n        typeof rej === 'function' && rej(pluginResult.error);\n    }\n    return p;\n}\nfunction wrapOtherPromise(pluginObj, methodName, args, opts) {\n    if (opts === void 0) { opts = {}; }\n    return getPromise(function (resolve, reject) {\n        var pluginResult = callCordovaPlugin(pluginObj, methodName, args, opts);\n        if (pluginResult) {\n            if (pluginResult.error) {\n                reject(pluginResult.error);\n            }\n            else if (pluginResult.then) {\n                pluginResult.then(resolve).catch(reject);\n            }\n        }\n        else {\n            reject({ error: 'unexpected_error' });\n        }\n    });\n}\nfunction wrapObservable(pluginObj, methodName, args, opts) {\n    if (opts === void 0) { opts = {}; }\n    return new Observable(function (observer) {\n        var pluginResult;\n        if (opts.destruct) {\n            pluginResult = callCordovaPlugin(pluginObj, methodName, args, opts, function () {\n                var args = [];\n                for (var _i = 0; _i < arguments.length; _i++) {\n                    args[_i] = arguments[_i];\n                }\n                return observer.next(args);\n            }, function () {\n                var args = [];\n                for (var _i = 0; _i < arguments.length; _i++) {\n                    args[_i] = arguments[_i];\n                }\n                return observer.error(args);\n            });\n        }\n        else {\n            pluginResult = callCordovaPlugin(pluginObj, methodName, args, opts, observer.next.bind(observer), observer.error.bind(observer));\n        }\n        if (pluginResult && pluginResult.error) {\n            observer.error(pluginResult.error);\n            observer.complete();\n        }\n        return function () {\n            try {\n                if (opts.clearFunction) {\n                    if (opts.clearWithArgs) {\n                        return callCordovaPlugin(pluginObj, opts.clearFunction, args, opts, observer.next.bind(observer), observer.error.bind(observer));\n                    }\n                    return callCordovaPlugin(pluginObj, opts.clearFunction, []);\n                }\n            }\n            catch (e) {\n                console.warn('Unable to clear the previous observable watch for', pluginObj.constructor.getPluginName(), methodName);\n                console.warn(e);\n            }\n        };\n    });\n}\n/**\n * Wrap the event with an observable\n * @private\n * @param event event name\n * @param element The element to attach the event listener to\n * @returns {Observable}\n */\nfunction wrapEventObservable(event, element) {\n    element =\n        typeof window !== 'undefined' && element\n            ? get(window, element)\n            : element || (typeof window !== 'undefined' ? window : {});\n    return fromEvent(element, event);\n}\nexport function checkAvailability(plugin, methodName, pluginName) {\n    var pluginRef, pluginInstance, pluginPackage;\n    if (typeof plugin === 'string') {\n        pluginRef = plugin;\n    }\n    else {\n        pluginRef = plugin.constructor.getPluginRef();\n        pluginName = plugin.constructor.getPluginName();\n        pluginPackage = plugin.constructor.getPluginInstallName();\n    }\n    pluginInstance = getPlugin(pluginRef);\n    if (!pluginInstance || (!!methodName && typeof pluginInstance[methodName] === 'undefined')) {\n        if (typeof window === 'undefined' || !window.cordova) {\n            cordovaWarn(pluginName, methodName);\n            return ERR_CORDOVA_NOT_AVAILABLE;\n        }\n        pluginWarn(pluginName, pluginPackage, methodName);\n        return ERR_PLUGIN_NOT_INSTALLED;\n    }\n    return true;\n}\n/**\n * Checks if _objectInstance exists and has the method/property\n * @private\n */\nexport function instanceAvailability(pluginObj, methodName) {\n    return pluginObj._objectInstance && (!methodName || typeof pluginObj._objectInstance[methodName] !== 'undefined');\n}\nexport function setIndex(args, opts, resolve, reject) {\n    if (opts === void 0) { opts = {}; }\n    // ignore resolve and reject in case sync\n    if (opts.sync) {\n        return args;\n    }\n    // If the plugin method expects myMethod(success, err, options)\n    if (opts.callbackOrder === 'reverse') {\n        // Get those arguments in the order [resolve, reject, ...restOfArgs]\n        args.unshift(reject);\n        args.unshift(resolve);\n    }\n    else if (opts.callbackStyle === 'node') {\n        args.push(function (err, result) {\n            if (err) {\n                reject(err);\n            }\n            else {\n                resolve(result);\n            }\n        });\n    }\n    else if (opts.callbackStyle === 'object' && opts.successName && opts.errorName) {\n        var obj = {};\n        obj[opts.successName] = resolve;\n        obj[opts.errorName] = reject;\n        args.push(obj);\n    }\n    else if (typeof opts.successIndex !== 'undefined' || typeof opts.errorIndex !== 'undefined') {\n        var setSuccessIndex = function () {\n            // If we've specified a success/error index\n            if (opts.successIndex > args.length) {\n                args[opts.successIndex] = resolve;\n            }\n            else {\n                args.splice(opts.successIndex, 0, resolve);\n            }\n        };\n        var setErrorIndex = function () {\n            // We don't want that the reject cb gets spliced into the position of an optional argument that has not been\n            // defined and thus causing non expected behavior.\n            if (opts.errorIndex > args.length) {\n                args[opts.errorIndex] = reject; // insert the reject fn at the correct specific index\n            }\n            else {\n                args.splice(opts.errorIndex, 0, reject); // otherwise just splice it into the array\n            }\n        };\n        if (opts.successIndex > opts.errorIndex) {\n            setErrorIndex();\n            setSuccessIndex();\n        }\n        else {\n            setSuccessIndex();\n            setErrorIndex();\n        }\n    }\n    else {\n        // Otherwise, let's tack them on to the end of the argument list\n        // which is 90% of cases\n        args.push(resolve);\n        args.push(reject);\n    }\n    return args;\n}\nexport function callCordovaPlugin(pluginObj, methodName, args, opts, resolve, reject) {\n    if (opts === void 0) { opts = {}; }\n    // Try to figure out where the success/error callbacks need to be bound\n    // to our promise resolve/reject handlers.\n    args = setIndex(args, opts, resolve, reject);\n    var availabilityCheck = checkAvailability(pluginObj, methodName);\n    if (availabilityCheck === true) {\n        var pluginInstance = getPlugin(pluginObj.constructor.getPluginRef());\n        return pluginInstance[methodName].apply(pluginInstance, args);\n    }\n    else {\n        return availabilityCheck;\n    }\n}\nexport function callInstance(pluginObj, methodName, args, opts, resolve, reject) {\n    if (opts === void 0) { opts = {}; }\n    args = setIndex(args, opts, resolve, reject);\n    if (instanceAvailability(pluginObj, methodName)) {\n        return pluginObj._objectInstance[methodName].apply(pluginObj._objectInstance, args);\n    }\n}\nexport function getPlugin(pluginRef) {\n    if (typeof window !== 'undefined') {\n        return get(window, pluginRef);\n    }\n    return null;\n}\nexport function get(element, path) {\n    var paths = path.split('.');\n    var obj = element;\n    for (var i = 0; i < paths.length; i++) {\n        if (!obj) {\n            return null;\n        }\n        obj = obj[paths[i]];\n    }\n    return obj;\n}\nexport function pluginWarn(pluginName, plugin, method) {\n    if (method) {\n        console.warn('Native: tried calling ' + pluginName + '.' + method + ', but the ' + pluginName + ' plugin is not installed.');\n    }\n    else {\n        console.warn(\"Native: tried accessing the \" + pluginName + \" plugin but it's not installed.\");\n    }\n    if (plugin) {\n        console.warn(\"Install the \" + pluginName + \" plugin: 'ionic cordova plugin add \" + plugin + \"'\");\n    }\n}\n/**\n * @private\n * @param pluginName\n * @param method\n */\nexport function cordovaWarn(pluginName, method) {\n    if (typeof process === 'undefined') {\n        if (method) {\n            console.warn('Native: tried calling ' +\n                pluginName +\n                '.' +\n                method +\n                ', but Cordova is not available. Make sure to include cordova.js or run in a device/simulator');\n        }\n        else {\n            console.warn('Native: tried accessing the ' +\n                pluginName +\n                ' plugin but Cordova is not available. Make sure to include cordova.js or run in a device/simulator');\n        }\n    }\n}\n/**\n * @private\n */\nexport var wrap = function (pluginObj, methodName, opts) {\n    if (opts === void 0) { opts = {}; }\n    return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        if (opts.sync) {\n            // Sync doesn't wrap the plugin with a promise or observable, it returns the result as-is\n            return callCordovaPlugin(pluginObj, methodName, args, opts);\n        }\n        else if (opts.observable) {\n            return wrapObservable(pluginObj, methodName, args, opts);\n        }\n        else if (opts.eventObservable && opts.event) {\n            return wrapEventObservable(opts.event, opts.element);\n        }\n        else if (opts.otherPromise) {\n            return wrapOtherPromise(pluginObj, methodName, args, opts);\n        }\n        else {\n            return wrapPromise(pluginObj, methodName, args, opts);\n        }\n    };\n};\n/**\n * @private\n */\nexport function wrapInstance(pluginObj, methodName, opts) {\n    if (opts === void 0) { opts = {}; }\n    return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        if (opts.sync) {\n            return callInstance(pluginObj, methodName, args, opts);\n        }\n        else if (opts.observable) {\n            return new Observable(function (observer) {\n                var pluginResult;\n                if (opts.destruct) {\n                    pluginResult = callInstance(pluginObj, methodName, args, opts, function () {\n                        var args = [];\n                        for (var _i = 0; _i < arguments.length; _i++) {\n                            args[_i] = arguments[_i];\n                        }\n                        return observer.next(args);\n                    }, function () {\n                        var args = [];\n                        for (var _i = 0; _i < arguments.length; _i++) {\n                            args[_i] = arguments[_i];\n                        }\n                        return observer.error(args);\n                    });\n                }\n                else {\n                    pluginResult = callInstance(pluginObj, methodName, args, opts, observer.next.bind(observer), observer.error.bind(observer));\n                }\n                if (pluginResult && pluginResult.error) {\n                    observer.error(pluginResult.error);\n                }\n                return function () {\n                    try {\n                        if (opts.clearWithArgs) {\n                            return callInstance(pluginObj, opts.clearFunction, args, opts, observer.next.bind(observer), observer.error.bind(observer));\n                        }\n                        return callInstance(pluginObj, opts.clearFunction, []);\n                    }\n                    catch (e) {\n                        console.warn('Unable to clear the previous observable watch for', pluginObj.constructor.getPluginName(), methodName);\n                        console.warn(e);\n                    }\n                };\n            });\n        }\n        else if (opts.otherPromise) {\n            return getPromise(function (resolve, reject) {\n                var result;\n                if (opts.destruct) {\n                    result = callInstance(pluginObj, methodName, args, opts, function () {\n                        var args = [];\n                        for (var _i = 0; _i < arguments.length; _i++) {\n                            args[_i] = arguments[_i];\n                        }\n                        return resolve(args);\n                    }, function () {\n                        var args = [];\n                        for (var _i = 0; _i < arguments.length; _i++) {\n                            args[_i] = arguments[_i];\n                        }\n                        return reject(args);\n                    });\n                }\n                else {\n                    result = callInstance(pluginObj, methodName, args, opts, resolve, reject);\n                }\n                if (result && result.then) {\n                    result.then(resolve, reject);\n                }\n                else {\n                    reject();\n                }\n            });\n        }\n        else {\n            var pluginResult_1, rej_1;\n            var p = getPromise(function (resolve, reject) {\n                if (opts.destruct) {\n                    pluginResult_1 = callInstance(pluginObj, methodName, args, opts, function () {\n                        var args = [];\n                        for (var _i = 0; _i < arguments.length; _i++) {\n                            args[_i] = arguments[_i];\n                        }\n                        return resolve(args);\n                    }, function () {\n                        var args = [];\n                        for (var _i = 0; _i < arguments.length; _i++) {\n                            args[_i] = arguments[_i];\n                        }\n                        return reject(args);\n                    });\n                }\n                else {\n                    pluginResult_1 = callInstance(pluginObj, methodName, args, opts, resolve, reject);\n                }\n                rej_1 = reject;\n            });\n            // Angular throws an error on unhandled rejection, but in this case we have already printed\n            // a warning that Cordova is undefined or the plugin is uninstalled, so there is no reason\n            // to error\n            if (pluginResult_1 && pluginResult_1.error) {\n                p.catch(function () { });\n                typeof rej_1 === 'function' && rej_1(pluginResult_1.error);\n            }\n            return p;\n        }\n    };\n}\n//# sourceMappingURL=common.js.map"]},"metadata":{},"sourceType":"module"}